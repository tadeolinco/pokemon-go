<div class="ui grid centered">
    <form class="row ui form" ng-submit="main.search()">
        <div class="five wide column">
            <div class="field">
                <select class="ui dropdown" ng-model="main.category" id="search-by-select" name="select-by">
                    <option value="">{{main.searchError}}</option>
                    <option ng-repeat="option in main.options" 
                            value="{{option.value}}">
                            {{option.label}}
                    </option>
                </select>
            </div>
        </div>
        <div class="eight wide column">
            <input type="text" ng-model="main.input" placeholder="Enter text">
        </div>
        <div class="three wide column">
            <button id="search-button" class="ui fluid yellow button" type="submit">Search</button>
        </div>
    </form>
</div>
<div class = "ui grid centered">
    <div class="ui top attached tabular menu">
        <div ng-repeat="result in main.results" class="item tab-{{result.key}}"  ng-click="main.activateTab(result.key)">
            {{result.field}}
        </div>
    </div>
    <div class="row" ng-if="main.searching">
        <div class="sixteen wide column middle aligned">
            <div class="ui active massive inline loader"></div>
        </div>
    </div>
    <div class="ui bottom attached tab segment tab-{{result.key}}" ng-repeat="result in main.results">
        <div class="ui grid centered">
            <div class="three wide column" ng-repeat="unit in result.data | orderBy : result.key track by $index"
            ng-click="main.openModal(unit)">
                <div class="ui fluid special card centered">
                    <div class="blurring dimmable image">
                        <div class="ui dimmer">
                            <div class="content">
                                <div class="center">
                                    <div class="ui inverted button">View/Edit</div>
                                </div>
                                <div class="center">
                                    <div class="ui inverted button">Delete</div>
                                </div>
                            </div>
                        </div>  
                        <img class="ui image fluid" ng-src="/assets/pokemons/{{unit.entity}}.png">
                    </div>
                    <div class="content">
                        <div class="header">
                            {{unit.name}}
                        </div>
                        <div class="meta">
                            <div ng-if="unit.username">User</div>
                            <div ng-if="unit.pokemon_id">Pokemon</div>
                            <div ng-if="unit.prestige">Gym</div>
                        </div>
                    </div>
                    <div class="extra content">
                        <i class="user icon"></i>
                            <span ng-if="unit.username">
                                <span ng-if="unit.team !== 'NULL'" class="capitalize">Team {{unit.team}}</span>
                                <span ng-if="unit.team === 'NULL'">No team</span>
                            </span>
                            <span ng-if="!unit.username">
                                Owned by
                                <span ng-if="unit.pokemon_id">User #{{unit.user_id}}</span>
                                <span ng-if="unit.prestige">
                                    <span ng-if="unit.team === 'NULL'">no team</span>
                                    <span ng-if="unit.team !== 'NULL'" class="capitalize">Team {{unit.team}}</span>
                                </span>
                            </span>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>    

<!-- MODAL -->
    <div class="ui modal mini" id="modal-pokemon">
        <i class="close icon"></i>
        <div class="header">
            Pokemon
        </div>
        <div class="image content ui grid" style="background: transparent;">
            <div class="description eight wide centered column">
                <table class="ui celled compact table">
                    <thead>
                        <tr>
                            <th>Attribute</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody ng-if="!main.editing">
                        <tr ng-repeat="(attribute, value) in main.unit">
                            <td class="capitalize bold">{{main.snakeToEng(attribute)}}</td>
                            <td class="capitalize">{{main.isNone(value)}}</td>
                        </tr>
                    </tbody>
                    <tbody ng-if="main.editing" class="ui mini form">
                        <tr>
                            <td class="bold">Pokemon Id</td>
                            <td class="disabled field">
                                <input type="text" ng-model="main.unit.pokemon_id">
                            </td>
                        </tr>
                        <tr>
                            <td class="bold">Entity</td>
                            <td class="field">
                                <select class="ui dropdown" ng-model="main.unit.entity">
                                    <option ng-repeat="entity in main.entities" 
                                            value="{{entity}}">
                                            <span class="capitalize">{{main.snakeToEng(entity)}}</span>
                                    </option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td class="bold">Name</td>
                            <td class="field">
                                <input type="text" ng-model="main.unit.name">
                            </td>
                        </tr>
                        <tr>
                            <td class="bold">Cp</td>
                            <td class="field">
                                <input type="number" ng-model="main.unit.cp">
                            </td>
                        </tr>
                        <tr>
                            <td class="bold">Type1</td>
                            <td class="field">
                                <select class="ui dropdown" ng-model="main.unit.type1">
                                    <option ng-repeat="type in main.types" 
                                            value="{{type}}">
                                            <span class="capitalize">{{type}}</span>
                                    </option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td class="bold">Type2</td>
                            <td class="field">
                                <select class="ui dropdown" ng-model="main.unit.type2">
                                    <option value="NULL">NULL</option>
                                    <option ng-repeat="type in main.types" 
                                            value="{{type}}">
                                            <span class="capitalize">{{type}}</span>
                                    </option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td class="bold">Level</td>
                            <td class="field">
                                <input type="number" ng-model="main.unit.level">
                            </td>
                        </tr>
                        <tr>
                            <td class="bold">Date Caught</td>
                            <td class="field">
                                <input type="date" ng-model="main.unit.date_caught">
                            </td>
                        </tr>
                        <tr>
                            <td class="bold">User Id</td>
                            <td class="field">
                                <input type="number" ng-model="main.unit.user_id">
                            </td>
                        </tr>
                        <tr>
                            <td class="bold">Gym Id</td>
                            <td class="field">
                                <input type="number" ng-model="main.unit.gym_id">
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="eight wide column middle aligned">
                <div class="container img-background">
                    <div class="ui image fluid">
                        <img ng-src="/assets/pokemons/{{main.unit.entity}}.png">
                    </div>
                </div>
            </div>
        </div>
        <div class="actions">
            <div ng-if="!main.editing">
                <div class="ui blue right labeled icon button" ng-click="main.editPokemon()">Edit
                    <i class="edit icon"></i></div>
                <div class="ui black cancel button">Cancel</div>
            </div>
            <div ng-if="main.editing">
                <div class="ui blue right labeled icon button" ng-click="main.savePokemon()">Save
                    <i class="edit icon"></i></div>
                <div class="ui black cancel button">Cancel</div>
            </div>
        </div>
    </div>

<!-- FAB BUTTONS-->
    <button id="fab-user" class="circular huge ui red icon button">
        <i class="user icon"></i>
    </button>
    
    <button id="fab-pokemon" class="circular huge ui blue icon button">
        <i class="github alternate icon"></i>
    </button> 

    <button id="fab-gym" class="circular huge ui green icon button">
        <i class="building outline icon"></i>
    </button>

    <button id="fab-add" class="circular huge ui yellow icon button">
        <i class="plus icon"></i>
    </button>   

<script>
    $('.ui.modal').modal({
        closable  : false,
        detachable : false
    });


    $('.special.card').on('ready', '.image', function() {
        $(this).dimmer({});
    });

    $('#search-by-select').dropdown();

    $('.ui.form')
      .form({
        fields: {
          name: {
            identifier: 'select-by',
            rules: [
              {
                type   : 'empty',
                prompt : 'Please select something'
              }
            ]
          }
        }
      })
    ;

    $('#fab-add').click(function() {
        $(this).transition({
        animation  : 'scale',
        duration   : '0.3s',
        });
    })

    $('#fab-add').click(function() {
        $('#fab-user').hide().fadeIn('slow');
        $('#fab-pokemon').hide().fadeIn('slow');
        $('#fab-gym').hide().fadeIn('slow');
    });
        
    
      
      

</script>